(()=>{"use strict";class t{constructor(t){this.title=t.title,this.id=t.id}}let e=[];const a=localStorage.getItem("myProjects");let r;a&&(e=JSON.parse(a).map((e=>new t(e))));const o=t=>{r=e[t]},n=()=>{null!=e.length&&(r=e[0])};class d{constructor(t){this.id=t.id,this.title=t.title,this.description=t.description,this.dueDate=t.dueDate,this.priority=t.priority,this.projectId=t.projectId}updateTitle(t){this.title=t}updateDescription(t){this.description=t}updateDueDate(t){this.dueDate=t}updatePriority(t){this.priority=t}}let c=[];const s=localStorage.getItem("myEvents");s&&(c=JSON.parse(s).map((t=>new d(t))));const i=(()=>{const t={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},e={1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th",11:"11th",12:"12th",13:"13th",14:"14th",15:"15th",16:"16th",17:"17th",18:"18th",19:"19th",20:"20th",21:"21st",22:"22nd",23:"23rd",24:"24th",25:"25th",26:"26th",27:"27th",28:"28th",29:"29th",30:"30th",31:"31st"};return{formatDate:function(a){const r=a.split("-");return`${o=r[1],"0"==o[0]?t[parseInt(o[1])]:t[parseInt(o)]}-${function(t){return"0"==t[0]?e[parseInt(t[1])]:e[parseInt(t)]}(r[2])}-${r[0]}`;var o}}})();var u,l=new Uint8Array(16);function p(){if(!u&&!(u="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(l)}const m=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,y=function(t){return"string"==typeof t&&m.test(t)};for(var v=[],f=0;f<256;++f)v.push((f+256).toString(16).substr(1));const h=function(t,e,a){var r=(t=t||{}).random||(t.rng||p)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){a=a||0;for(var o=0;o<16;++o)e[a+o]=r[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(v[t[e+0]]+v[t[e+1]]+v[t[e+2]]+v[t[e+3]]+"-"+v[t[e+4]]+v[t[e+5]]+"-"+v[t[e+6]]+v[t[e+7]]+"-"+v[t[e+8]]+v[t[e+9]]+"-"+v[t[e+10]]+v[t[e+11]]+v[t[e+12]]+v[t[e+13]]+v[t[e+14]]+v[t[e+15]]).toLowerCase();if(!y(a))throw TypeError("Stringified UUID is invalid");return a}(r)},g=((()=>{const t=document.querySelector("[data-wrap-form]"),e=document.getElementById("overlay");document.querySelector("[data-new-event-form]").addEventListener("submit",(function(t){t.preventDefault();const e=r.id,n=h(),c=new d({title:document.querySelector("[name=title]").value,description:document.querySelector("[name=description]").value,dueDate:document.querySelector("[name=due-date]").value,priority:document.querySelector("[name=priority]").value});c.projectId=e,c.id=n,a(c),this.reset(),o()}));const a=t=>{const e=i.formatDate(t.dueDate);t.dueDate=e,c.push(t),localStorage.setItem("myEvents",JSON.stringify(c)),L.updateToDoDisplay()},o=()=>{e.classList.remove("active"),t.classList.remove("active")}})(),(()=>{const t=document.querySelector("[data-update-event-form]"),e=document.getElementById("overlay"),a=document.querySelector("[data-wrap-form-update]");let r,o="",n="",d="",s="";function u(t){t.preventDefault(),l(),p(),localStorage.setItem("myEvents",JSON.stringify(c)),this.reset(),h(),L.updateToDoDisplay()}const l=()=>{o=document.querySelector("[name=update-title]").value,n=document.querySelector("[name=update-description]").value,d=document.querySelector("[name=update-due-date]").value,s=document.querySelector("[name=update-priority]").value},p=()=>{m(r),y(r),v(r),f(r)},m=t=>{""!=o&&t.updateTitle(o)},y=t=>{""!=n&&t.updateDescription(n)},v=t=>{""!=d&&t.updateDueDate(i.formatDate(d))},f=t=>{null!=s&&t.updatePriority(s)},h=()=>{e.classList.remove("active"),a.classList.remove("active")};return{updateModalEvent:e=>{r=c.find((t=>t.id==e)),t.addEventListener("submit",u)}}})()),S=function(t){if(!t.target.matches("[data-delete-card]"))return;const e=t.target.dataset.deleteCard,a=c.findIndex((t=>t.id==e));c.splice(a,1),localStorage.setItem("myEvents",JSON.stringify(c)),L.updateToDoDisplay()},L=(()=>{const t=document.querySelector("[data-todo-events]"),e=document.querySelector("[data-expand-modal]"),a=document.querySelector("[data-wrap-form-update]"),o=document.querySelector("[data-card-close]"),n=document.querySelector("[data-hide-update-button]"),d=document.getElementById("overlay");t.addEventListener("click",S),t.addEventListener("click",(function(t){t.target.matches("[data-expand-card]")&&(e.classList.add("active"),d.classList.add("active"),function(t){const e=document.querySelector("[data-event-title]"),a=document.querySelector("[data-card-description]"),r=document.querySelector("[data-card-due-date]"),o=document.querySelector("[data-card-priority]");e.innerHTML=`<strong>${c[t].title}</strong>`,a.innerText=`${c[t].description}`,r.innerHTML=`<strong>Due:</strong> ${c[t].dueDate}`,o.innerHTML=`<strong>Priority:</strong> ${c[t].priority}`}(t.target.dataset.expandCard))})),t.addEventListener("click",(function(t){if(!t.target.matches("[data-edit-card]"))return;a.classList.add("active"),d.classList.add("active");const e=t.target.dataset.editCard;g.updateModalEvent(e)})),o.addEventListener("click",(()=>{o.closest(".wrap-event-modal").classList.remove("active"),d.classList.remove("active")})),n.addEventListener("click",(()=>{n.closest(".wrap-modal"),a.classList.remove("active"),d.classList.remove("active")}));return{updateToDoDisplay:function(){null!=r&&(t.innerHTML=c.filter((t=>t.projectId==r.id)).map(((t,e)=>`\n\t\t<tr class="event-row" data-card-row-${e} data-expand-card="${e}">\n\t\t\t\t<td><strong>To Do:</strong> ${t.title} </td>\n\t\t\t\t<td><strong>Due:</strong> ${t.dueDate}</td>\n\t\t\t\t<td><button data-edit-card="${t.id}">Edit</button></td>\n\t\t\t\t<td><button class="is-danger" data-delete-card="${t.id}">Delete</button></td>\n\t\t\t\t</tr><br />`)).join(""),c.filter((t=>t.projectId==r.id)).map(((t,e)=>{((t,e)=>{const a=document.querySelector(`[data-card-row-${e}]`);"high"==t.priority?a.classList.add("danger"):"medium"==t.priority?a.classList.add("medium"):"low"==t.priority&&a.classList.add("easy")})(t,e)})))}}})(),D=((()=>{const t=document.querySelector("[data-add-modal]"),e=document.querySelector("[data-hide-button]"),a=document.getElementById("overlay");t.addEventListener("click",(()=>{const e=document.querySelector(t.dataset.addModal);o(e)})),e.addEventListener("click",(()=>{const t=e.closest(".wrap-modal");n(t)}));const o=t=>{null!=t&&(null!=r?(t.classList.add("active"),a.classList.add("active")):window.alert("You need to set up a project"))},n=t=>{null!=t&&(t.classList.remove("active"),a.classList.remove("active"))}})(),(()=>{const t=document.querySelector("[data-new-project]");t.addEventListener("click",(()=>{const a=document.querySelector(t.dataset.newProject);e(a)}));const e=t=>{t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")}})(),(()=>{const t=document.querySelector("[data-project-list]");return{updateAllProjects:()=>{t.innerHTML=e.map(((t,e)=>`<tr class="project-row">\n\t\t\t\t\t\t\t<td class="project-name "data-project-target="${e}">${t.title}</td>\n\t\t\t\t\t\t\t<td><button class="delete-project" data-delete-project="${e}">&times</button></td>\n\t\t\t\t\t\t</tr>`)).join("")}}})()),j=(()=>{document.querySelector("[data-project-list]").addEventListener("click",(function(e){if(!e.target.matches("[data-project-target]"))return;const a=e.target.dataset.projectTarget;t(a),o(a),L.updateToDoDisplay()}));const t=t=>{const a=document.querySelector("[data-header-title]"),r=e[t].title;a.innerText=r};return{changeHeader:t,defaultHeader:t=>{const a=document.querySelector("[data-header-title]");0!=e.length?a.innerText=e[0].title:a.innerText="To Do Lists"}}})();(()=>{document.querySelector("[data-add-project]").addEventListener("submit",(function(e){e.preventDefault();const r=new t({title:document.querySelector("[name=project-title]").value});a(r),this.reset(),D.updateAllProjects()}));const a=t=>{null!=t&&(t.id=h(),e.push(t),localStorage.setItem("myProjects",JSON.stringify(e)))}})(),(()=>{document.querySelector("[data-project-list]").addEventListener("click",(function(a){if(!a.target.matches("[data-delete-project]"))return;const r=a.target.dataset.deleteProject,o=e[r];confirm("Are you sure you want to delete this project?")&&t(o,r)}));const t=(t,r)=>{const o=[];c.forEach((e=>{e.projectId==t.id&&o.push(e)})),a(o),e.splice(r,1),L.updateToDoDisplay(),D.updateAllProjects(),localStorage.setItem("myProjects",JSON.stringify(e)),j.defaultHeader()},a=t=>{t.forEach((t=>{c.splice(c.indexOf(t),1)})),localStorage.setItem("myEvents",JSON.stringify(c))}})(),n(),D.updateAllProjects(),j.defaultHeader(),L.updateToDoDisplay()})();